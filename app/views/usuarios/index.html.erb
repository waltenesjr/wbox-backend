<p id="notice"><%= notice %></p>

<h1>Usuarios Cadastrados</h1>
<h2>Total: <%= @usuarios.count %></h2>

<style>
  table {
    border-collapse: collapse;
    width: 100%;
  }

  th, td {
      padding: 8px;
      font-size: 8pt;
      text-align: center;
  }

  tr:nth-child(even){background-color: #f2f2f2}

  th {
      background-color: rgb(0, 51, 102);
      color: white;
  }
</style>

<table>
  <thead>
    <tr>
      <th>Email</th>
      <th>Data/Hora de cadastro</th>
      <th>Ausente</th>
      <th>Inicio do Periodo</th>
      <th>Final do Periodo</th>
      <th>Situacao</th>
      <th>Qtd Produtos Cadastados</th>
      <th>Data/Hora do Ultimo Cadastro</th>
      <th>Cod. Indicador</th>
      <th>Cod. Indicacao</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @usuarios.each do |usuario| %>
      <tr>
        <td style="text-align: left;"><%= usuario.email %></td>
        <td><%= usuario.created_at.to_s(:data_hora) %></td>
        <td><%= usuario.ausente == false ? 'NÃ£o' : 'Sim' %></td>
        <td><%= usuario.usuarioPeriodos.first.inicio_periodo.to_s(:data) %></td>
        <td><%= usuario.usuarioPeriodos.first.fim_periodo.to_s(:data) %></td>
        <td><%= usuario.usuarioPeriodos.first.situacao %></td>
        <td><%= usuario.produtos.size %></td>
        <td><%= usuario.produtos.last.nil? ? '' : usuario.produtos.last.created_at.to_s(:data_hora) %></td>
        <td><%= usuario.codigo_indicador %></td>
        <td><%= usuario.codigo_indicacao %></td>
        <td><%= link_to 'Show', usuario %></td>
        <td><%= link_to 'Edit', edit_usuario_path(usuario) %></td>
        <td><%= link_to 'Destroy', usuario, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
